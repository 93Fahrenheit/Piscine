# ðŸ“˜ COURS COMPLET : DIFF & PATCH

Ce cours t'explique tout ce quâ€™il faut comprendre pour rÃ©ussir un exercice basÃ© sur `diff` et `patch`.

---

## 1. ðŸ” Quâ€™est-ce que `diff` ?

La commande `diff` permet de **comparer deux fichiers** ligne par ligne, et **d'afficher leurs diffÃ©rences** sous forme d'instructions.

âž¡ï¸ On sâ€™en sert pour repÃ©rer ce qui a changÃ© entre deux versions dâ€™un fichier texte.

---

## 2. ðŸ“„ Que gÃ©nÃ¨re `diff` ?

`diff` produit un **fichier de diffÃ©rences** appelÃ© **patch** (souvent avec lâ€™extension `.diff` ou `.patch`).

Ce fichier contient des **instructions textuelles** qui indiquent :
- quelles lignes doivent Ãªtre supprimÃ©es
- quelles lignes doivent Ãªtre ajoutÃ©es
- oÃ¹ appliquer ces changements

---

## 3. ðŸ§ª Exemple simple

Supposons deux fichiers :

**fichier_a.txt**
Bonjour  
Comment Ã§a va ?  
Au revoir

**fichier_b.txt**
Salut  
Comment Ã§a va ?  
Ã€ bientÃ´t

Commande :
diff fichier_a.txt fichier_b.txt > modif.diff

Fichier `modif.diff` :
1c1  
< Bonjour  
---  
> Salut  
3c3  
< Au revoir  
---  
> Ã€ bientÃ´t

---

## 4. âš™ï¸ Comment utiliser `patch` ?

La commande `patch` applique un fichier `.diff` Ã  un fichier dâ€™origine, en suivant ses instructions.

### Syntaxe de base :
patch fichier_original fichier_patch.diff

Cette commande modifie le fichier original directement.

### Si on veut crÃ©er un nouveau fichier de sortie :
patch fichier_original fichier_patch.diff -o fichier_modifiÃ©

ðŸ‘‰ Cela laisse intact le fichier original et gÃ©nÃ¨re une version corrigÃ©e.

---

## 5. ðŸŽ¯ Utilisation typique

### Pour gÃ©nÃ©rer un patch :
diff -u ancien nouveau > patch.diff

- `-u` : format "unifiÃ©", plus lisible et souvent utilisÃ© par dÃ©faut  
- `>` : redirige le rÃ©sultat dans un fichier `.diff`

### Pour appliquer un patch :
patch ancien patch.diff -o nouveau

---

## 6. ðŸ§  Comprendre le format `.diff`

Un fichier `.diff` contient des **blocs** qui indiquent les changements.

Exemple :
@@ -1,3 +1,3 @@  
-Bonjour  
+Salut  
 Comment Ã§a va ?  
-Au revoir  
+Ã€ bientÃ´t

Explication :
- `@@ -1,3 +1,3 @@` : changement de la ligne 1 Ã  3  
- `-` : lignes Ã  supprimer  
- `+` : lignes Ã  insÃ©rer

---

## 7. ðŸ§ª Tester son travail

Pour vÃ©rifier que le fichier patchÃ© est correct :
diff fichier_attendu fichier_modifiÃ©

âœ… Si rien ne s'affiche, câ€™est que les fichiers sont identiques.

---

## 8. âœ… Cas typique dâ€™exercice (ex07)

Tu reÃ§ois :
- un fichier `a`
- un patch `sw.diff`

Tu dois produire `b` Ã  lâ€™aide de :
patch a sw.diff -o b

Puis rendre le fichier `b` uniquement.

---

## 9. ðŸ” RÃ©sumÃ© des commandes utiles

- CrÃ©er un patch :
diff -u fichier1 fichier2 > patch.diff

- Appliquer un patch sans modifier lâ€™original :
patch fichier1 patch.diff -o fichier2

- VÃ©rifier si deux fichiers sont identiques :
diff fichier1 fichier2

- Voir les fins de lignes (utile pour cat -e) :
cat -e fichier

---

## 10. ðŸ“š Pour aller plus loin

- man diff  
- man patch  
- https://git-scm.com/docs/git-diff  
- Pour les contributions open source : comprendre les patches est essentiel

---


